---
const { product } = Astro.props;

// Generate a valid URL for the product
const productUrl = new URL(Astro.url.pathname, Astro.site).toString();

// Get the image URL
const imageUrl = new URL('/images/coupons/digital-couponing-hero.webp', Astro.site).toString();
---

<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Product",
  "name": product.name,
  "description": product.description,
  "url": productUrl,
  "image": imageUrl,
  "brand": {
    "@type": "Brand",
    "name": "SaveEarnShare"
  },
  "offers": {
    "@type": "Offer",
    "price": "0.00",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "url": productUrl
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "bestRating": "5",
    "worstRating": "1",
    "ratingCount": "150",
    "reviewCount": "150"
  },
  "review": {
    "@type": "Review",
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": "5",
      "bestRating": "5",
      "worstRating": "1"
    },
    "author": {
      "@type": "Person",
      "name": "Sarah Johnson"
    },
    "reviewBody": "This digital couponing guide helped me save over $200 on my monthly grocery bills. The strategies are easy to follow and very effective."
  }
})} />
